<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Сканер QR — посещаемость</title>
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  </head>
  <body class="bg-slate-900 text-slate-100">
    <div class="max-w-xl mx-auto px-4 py-6">
      <h1 class="text-2xl font-bold mb-2">Сканирование QR</h1>
      <p class="text-sm text-slate-300 mb-4">
        Открой этот WebApp по кнопке в боте, наведи камеру на QR-код лекции и
        дождись распознавания. После этого окно закроется, а отметка будет
        обработана ботом.
      </p>

      <div class="bg-slate-800 rounded-xl p-4 space-y-3">
        <button
          id="btn-start-qr"
          class="w-full rounded-lg bg-emerald-500 hover:bg-emerald-600 px-4 py-2 text-sm font-semibold"
        >
          Запустить сканер QR
        </button>

        <video
          id="qr-video"
          class="w-full rounded-lg hidden"
          autoplay
          playsinline
        ></video>

        <div
          id="qr-zoom-container"
          class="hidden items-center gap-2 text-xs text-slate-300"
        >
          <span>Масштаб камеры</span>
          <input
            id="qr-zoom-slider"
            type="range"
            min="1"
            max="5"
            step="0.1"
            class="flex-1"
          />
        </div>

        <canvas id="qr-canvas" class="hidden"></canvas>
        <p id="qr-status" class="text-xs text-slate-400"></p>
      </div>

      <p class="mt-6 text-xs text-slate-500">
        QR-код должен содержать уникальные данные лекции. Вводить ID лекции не
        нужно.
      </p>
    </div>

    <script src="./main.js"></script>
  </body>
</html>
